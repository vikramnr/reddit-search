{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","console","log","err","searchForm","document","getElementById","searchInput","addEventListener","value","querySelector","showMessage","output","results","forEach","image","post","preview","images","source","url","title","truncateText","selftext","subreddit","score","innerHTML","e","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortend","indexOf","substring"],"mappings":";;;;;ACAA;kBDAe;AACXA,YAAQ,gBAAUC,UAAV,EAAsBC,WAAtB,EAAmCC,MAAnC,EAA2C;AAC/C,eAAOC,+CAA6CH,UAA7C,cAAgEE,MAAhE,eAAgFD,WAAhF,EACFG,IADE,CACG;AAAA,mBAAOC,IAAIC,IAAJ,EAAP;AAAA,SADH,EAEFF,IAFE,CAEG,gBAAQ;ACF1B,ADGgB,ICHVU,aAAaC,EDGIR,KAAKA,ECHAS,EDGL,CAAUR,QAAV,CAAmBC,ECHvB,CAAwB,ADGpB,CAAuB,YCH3B,CAAnB;AACA,ADE8C,ICFxCQ,cAAcF,KDEkCR,ICFzBS,CDE8BT,IAAb,SCF1B,CAAwB,cAAxB,CAApB;ADE8C,aAAvB,CAAP;ACAhBO,ADCa,SAJE,ECGJI,ADEER,KALE,CAKI,UCFnB,CAA4B,QAA5B,EAAsC,aAAK;AACvC,ADCe,QCDTV,WDCgBW,ECDHM,MDCWL,GAAR,CAAYC,ECDHM,CDCT,CAAP,GCDf;AACA,ADAe,QCATjB,CDLK,CAAP,OCKWa,SAASK,aAAT,CAAuB,4BAAvB,EAAqDD,KAApE;AACA,ADAC,QCAKlB,cAAcc,SAASC,cAAT,CAAwB,OAAxB,EAAiCG,KAArD;AACA,ADTW,QCSPnB,eAAe,EAAnB,EAAuB;AACnBqB,oBAAY,wBAAZ,EAAsC,cAAtC;AACH;AACDJ,gBAAYE,KAAZ,GAAoB,EAApB;AACA,wBAAOpB,MAAP,CAAcC,UAAd,EAA0BC,WAA1B,EAAuCC,MAAvC,EACKE,IADL,CACU,mBAAW;AACb,YAAIkB,qHAAJ;AAGAC,gBAAQC,OAAR,CAAgB,gBAAQ;;AAEpB,gBAAMC,QAAOC,KAAKC,OAAL,GAAeD,KAAKC,OAAL,CAC3BC,MAD2B,CACpB,CADoB,EACjBC,MADiB,CACVC,GADL,GACS,qEADtB;;AAGAR,mJAGqCG,KAHrC,yHAK6BC,KAAKK,KALlC,wDAM2BC,aAAaN,KAAKO,QAAlB,EAA2B,GAA3B,CAN3B,2CAOeP,KAAKI,GAPpB,oLAUqDJ,KAAKQ,SAV1D,4EAW4CR,KAAKS,KAXjD;AAeH,SApBD;AAqBAb;AACAP,iBAASC,cAAT,CAAwB,SAAxB,EAAmCoB,SAAnC,GAA+Cd,MAA/C;AACH,KA5BL;AA6BAe,MAAEC,cAAF;AACH,CAtCD;;AAwCA,SAASjB,WAAT,CAAqBkB,OAArB,EAA8BC,SAA9B,EAAyC;AACrC,QAAMC,MAAM1B,SAAS2B,aAAT,CAAuB,KAAvB,CAAZ;AACAD,QAAID,SAAJ,cAAyBA,SAAzB;AACAC,QAAIE,WAAJ,CAAgB5B,SAAS6B,cAAT,CAAwBL,OAAxB,CAAhB;;AAEA,QAAMM,kBAAkB9B,SAASC,cAAT,CAAwB,kBAAxB,CAAxB;AACA,QAAMjB,SAASgB,SAASC,cAAT,CAAwB,QAAxB,CAAf;AACA6B,oBAAgBC,YAAhB,CAA6BL,GAA7B,EAAkC1C,MAAlC;AACAgD,eAAW,YAAM;AACbhC,iBAASK,aAAT,CAAuB,QAAvB,EAAiC4B,MAAjC;AACH,KAFD,EAEG,IAFH;AAGH;;AAED,SAAShB,YAAT,CAAsBiB,IAAtB,EAA2BC,KAA3B,EAAiC;AAC7B,QAAMC,WAAWF,KAAKG,OAAL,CAAa,GAAb,EAAiBF,KAAjB,CAAjB;AACA,QAAGC,YAAY,CAAC,CAAhB,EAAmB,OAAOF,IAAP;AACnB,WAAOA,KAAKI,SAAL,CAAe,CAAf,EAAiBF,QAAjB,CAAP;AACH","file":"index.map","sourcesContent":["export default {\r\n    search: function (searchTerm, searchLimit, sortBy) {\r\n        return fetch(`http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                return data.data.children.map(data => data.data)\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n}","import reddit from './redditapi'\r\n\r\nconst searchForm = document.getElementById('search-form')\r\nconst searchInput = document.getElementById('search-input')\r\n\r\nsearchForm.addEventListener('submit', e => {\r\n    const searchTerm = searchInput.value;\r\n    const sortBy = document.querySelector('input[name=sortby]:checked').value\r\n    const searchLimit = document.getElementById('limit').value\r\n    if (searchTerm === '') {\r\n        showMessage('Please add search term', 'alert-danger')\r\n    }\r\n    searchInput.value = '';\r\n    reddit.search(searchTerm, searchLimit, sortBy)\r\n        .then(results => {\r\n            let output = `<div class=\"card-colums\">\r\n                            <div class=\"row\">\r\n                                `;\r\n            results.forEach(post => {\r\n\r\n                const image =post.preview ? post.preview\r\n                .images[0].source.url:'https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg'\r\n\r\n                output +=\r\n                    `<div class=\"col-sm-3\">\r\n                    <div class=\"card mb-2\">\r\n                    <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\r\n                    <div class=\"card-body\">\r\n                    <h5 class=\"card-title\">${post.title}</h5>\r\n                    <p class=\"card-text\">${truncateText(post.selftext,100)}</p>\r\n                    <a href=\"${post.url}\" target=\"_blank\r\n                    \" class=\"btn btn-primary\">Read More</a>\r\n                    <hr>\r\n                    <span class=\"badge badge-secondary\">Subreddit: ${post.subreddit}</span> \r\n                    <span class=\"badge badge-dark\">Score: ${post.score}</span>\r\n                    </div>\r\n                    </div>\r\n                    </div>`\r\n            });\r\n            output += `</div></div>`\r\n            document.getElementById('results').innerHTML = output\r\n        })\r\n    e.preventDefault()\r\n})\r\n\r\nfunction showMessage(message, className) {\r\n    const div = document.createElement('div')\r\n    div.className = `alert ${className}`\r\n    div.appendChild(document.createTextNode(message))\r\n\r\n    const searchContainer = document.getElementById('search-container')\r\n    const search = document.getElementById('search')\r\n    searchContainer.insertBefore(div, search)\r\n    setTimeout(() => {\r\n        document.querySelector('.alert').remove()\r\n    }, 5000);\r\n}\r\n\r\nfunction truncateText(text,limit){\r\n    const shortend = text.indexOf(' ',limit)\r\n    if(shortend == -1) return text\r\n    return text.substring(0,shortend)\r\n}"]}